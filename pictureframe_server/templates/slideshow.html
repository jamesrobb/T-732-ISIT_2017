<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>

		<title>Digital Picture Frame</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		
		<link rel="stylesheet" href="/static/css/supersized.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="/static/theme/supersized.shutter.css" type="text/css" media="screen" />
		
		<script type="text/javascript" src="/static/js/jquery-1.6.min.js"></script>
		<script type="text/javascript" src="/static/js/jquery.easing.min.js"></script>
		
		<script type="text/javascript" src="/static/js/supersized.3.2.7.min.js"></script>
		<script type="text/javascript" src="/static/theme/supersized.shutter.min.js"></script>

		<script type="text/javascript" src="/static/js/scripts.js"></script>

		<script type="text/javascript">
			
			live_slides = [];
			
			function createSuperSize() {
				
				$.supersized({
				
					// Functionality
					slide_interval          :   3000,		// Length between transitions
					transition              :   1, 			// 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
					transition_speed		:	700,		// Speed of transition
															   
					// Components							
					slide_links				:	'false',	// Individual links for each slide (Options: false, 'num', 'name', 'blank')
					slides 					:  	live_slides
				});
		    
		    }

			
		    var get_image_list = function() {
				//http://apis.is/cyclecounter
				$.ajax({
					url: "http://localhost:5000/get_images",
					type: "GET",
					dataType: "json",
					success: function(response){
						console.log("Success");
						console.log(response);
						live_slides = response;
						$("#supersized").empty();
						createSuperSize();
					}
				}).done(function() {
					console.log("It's done");
				}).fail(function(err) {
					console.log("It failed");
					console.log({err: err});
				});				
			}


			$(document).ready(function() {
				get_image_list();

				//setTimeout(get_image_list, 10000);
				setInterval(get_image_list, 10000);
			});
			//get_image_list();
			
			
		</script>
		
	</head>
	
	<style type="text/css">
		ul#demo-block{ margin:0 15px 15px 15px; }
			ul#demo-block li{ margin:0 0 10px 0; padding:10px; display:inline; float:left; clear:both; color:#aaa; background:url('img/bg-black.png'); font:11px Helvetica, Arial, sans-serif; }
			ul#demo-block li a{ color:#eee; font-weight:bold; }
	</style>
	

<body>


</body>
</html>
